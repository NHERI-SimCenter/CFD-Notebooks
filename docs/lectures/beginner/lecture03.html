

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Lecture 03: Boundary conditions &mdash; CFD-Notebooks 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lecture 04: blockMesh" href="lecture04.html" />
    <link rel="prev" title="Lecture 02: Files and solvers" href="lecture02.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/CFDN.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../geninfo/acknowledgement.html">1. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geninfo/about.html">2. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geninfo/getting-started.html">3. Getting started with CFDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geninfo/errors.html">4. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geninfo/copyright.html">5. Copyright and License</a></li>
</ul>
<p class="caption"><span class="caption-text">Lecture notebooks</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../beginner.html">1. Beginner lectures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beginner.html#learning-objectives">1.1. Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../beginner.html#pre-requisites">1.2. Pre-requisites</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../beginner.html#lecture-notebooks-theory">1.3. Lecture notebooks (Theory)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lecture01.html">Lecture 01: Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="lecture02.html">Lecture 02: Files and solvers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Lecture 03: Boundary conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#conservation-relations">Conservation relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boundary-treatment-methods">Boundary treatment methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#types-of-boundaries">Types of boundaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boundary-conditions-in-of">Boundary conditions in OF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lecture04.html">Lecture 04: blockMesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="lecture05.html">Lecture 05: snappyHexMesh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../beginner.html#references">1.4. References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intermediate.html">2. Intermediate lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced.html">3. Advanced lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../professional.html">4. Professional lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-probs.html">5. Practice Problems</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CFD-Notebooks</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../beginner.html"><span class="section-number">1. </span>Beginner lectures</a> &raquo;</li>
        
      <li>Lecture 03: Boundary conditions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lecture-03-boundary-conditions">
<span id="lbl-lecture03"></span><h1>Lecture 03: Boundary conditions<a class="headerlink" href="#lecture-03-boundary-conditions" title="Permalink to this headline">¶</a></h1>
<p>The accurate treatment of boundary conditions is critical in many computational fluid dynamics (CFD) simulations. Fundamentally, problems associated with boundary conditions for compressible flows arise because of the difficulty in ensuring a well-posed problem. Each boundary condition has a physical meaning described mathematically via an equation, which in the context of a numerical method has to be translated into an algebraic relation. An inlet boundary condition for instance, describes a known flow behavior where velocity and pressure satisfy specified physical conditions. These include a Dirichlet and a Neumann condition, which should be defined in order to connect the mathematical model with the boundary conditions of the problem. This lecture gives an insight into the boundary conditions in and their implementation in OpenFOAM.</p>
<p>In order to accomplish this task, we need to briefly discuss the Navier stokes equations. In this regard, let us consider the equations for the conservation of mass, momentum and energy.</p>
<div class="section" id="conservation-relations">
<h2>Conservation relations<a class="headerlink" href="#conservation-relations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mass-conservation">
<h3>Mass conservation<a class="headerlink" href="#mass-conservation" title="Permalink to this headline">¶</a></h3>
<p>The law of mass conservation or the law of continuity establishes the fact that mass cannot be created in such a closed fluid system, nor can disappear from it. There is also no diffusive flux contribution to the continuity equation, since for a fluid at rest, any variation of mass would imply a displacement of fluid particles. The conserved quantity in this case is the density <span class="math notranslate nohighlight">\(\rho\)</span>. For the time rate of change of the total mass inside the control volume <span class="math notranslate nohighlight">\(\Omega\)</span> we have,</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t} \int_\Omega \rho d \Omega\]</div>
<p>The mass flow of a fluid through some surface fixed in space equals to the product of density, surface area and velocity component perpendicular to the surface. Therefore, the contribution from the convective flux across each surface element <span class="math notranslate nohighlight">\(dS\)</span> becomes,</p>
<div class="math notranslate nohighlight">
\[\rho(\vec{v}.\vec{n})dS\]</div>
<p>Since there are no source terms present, we can write this as</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t}\int_\Omega \rho d\Omega + \oint_{\partial\Omega} \rho(\vec{v}.\vec{n})dS = 0\]</div>
<p>This represents the integral form of the continuity equation - the conservation law of mass.</p>
</div>
<div class="section" id="momentum-conservation">
<h3>Momentum Conservation<a class="headerlink" href="#momentum-conservation" title="Permalink to this headline">¶</a></h3>
<p>The variation of momentum is caused by the net force acting on an mass element. For the momentum of an infinitesimally small portion of the control volume <span class="math notranslate nohighlight">\(\Omega\)</span>,</p>
<div class="math notranslate nohighlight">
\[\rho\vec{v}d\Omega\]</div>
<p>The variation in time of momentum within the control volume equals,</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t} \int_\Omega \rho \vec{v}d \Omega\]</div>
<p>Hence, the conserved quantity is here the product of density times the velocity, i.e.,</p>
<div class="math notranslate nohighlight">
\[\rho\vec{v}= [\rho u,\rho v,\rho w]^T\]</div>
<p>The convective flux tensor, which describes the transfer of momentum across the boundary of the control volume, consists in the Cartesian coordinate system of the following three components.</p>
<ul class="simple">
<li><p><strong>x</strong>- component : :math`rho u vec{v}`</p></li>
<li><p><strong>y</strong>- component : :math`rho v vec{v}`</p></li>
<li><p><strong>z</strong>- component : :math`rho w vec{v}`</p></li>
</ul>
<p>The contribution of the convective flux tensor to the conservation of momentum is then given by</p>
<div class="math notranslate nohighlight">
\[-\oint_{\partial\Omega} \rho\vec{v}(\vec{v}.\vec{n})dS\]</div>
<p>The diffusive flux is zero, since there is no diffusion of momentum possible for a fluid at rest. There also exists a body force per unit volume, denoted as <span class="math notranslate nohighlight">\(\rho f_e\)</span> corresponds to the volume sources in. Thus, the contribution of the body (external) force to the momentum conservation is</p>
<div class="math notranslate nohighlight">
\[\int_\Omega \rho\vec{f_e}d\Omega\]</div>
<p>The surface sources consist then of two parts - an isotropic pressure component and a viscous stress tensor <span class="math notranslate nohighlight">\(\tau\)</span>,</p>
<div class="math notranslate nohighlight">
\[{\overline{Q}}_S = -p{\overline{I}}+{\overline{\tau}}\]</div>
<div class="align-center figure" id="id1">
<a class="reference internal image-reference" href="../../_images/Flux.png"><img alt="Forces acting on the surface of an element in the control volume" src="../../_images/Flux.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Forces acting on the surface of an element in the control volume</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Summing up  all the above contributions,  we finally obtain the expression,</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t}\int_\Omega \rho\vec{v}d\Omega+\oint_{\partial\Omega} \rho(\vec{v}.\vec{n})dS = \int_\Omega \rho\vec{f_e}d\Omega - \oint_{\partial\Omega}p \vec{n}dS + \oint_{\partial\Omega}({\overline{\tau}}.\vec{n})dS\]</div>
<p>for the momentum conservation inside an arbitrary control volume <span class="math notranslate nohighlight">\(\Omega\)</span> which is fixed in space.</p>
</div>
<div class="section" id="energy-conservation">
<h3>Energy Conservation<a class="headerlink" href="#energy-conservation" title="Permalink to this headline">¶</a></h3>
<p>Any changes in time of the total energy inside the volume are caused by the rate of work of forces acting on the volume and by the net heat flux into it. The total energy per unit mass E of a fluid is obtained by adding its internal energy per unit mass, <span class="math notranslate nohighlight">\(e\)</span>, to its kinetic energy per unit mass, <span class="math notranslate nohighlight">\(\frac{v^2}{2}\)</span>. Thus, we can write for the total energy,</p>
<div class="math notranslate nohighlight">
\[E = e + \frac{|\vec{v}|^2}{2} = e+ \frac{u^2+v^2+w^2}{2}\]</div>
<p>The conserved quantity is in this case the total energy per unit volume, i.e., <span class="math notranslate nohighlight">\(\rho E\)</span>. Its variation in time within the volume :math`rho` can be expressed as,</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t} \int_\Omega \rho Ed \Omega\]</div>
<p>The contribution of the convective flux can then be written as,</p>
<div class="math notranslate nohighlight">
\[-\oint_{\partial\Omega} \rho E(\vec{v}.\vec{n})dS\]</div>
<p>In contrast to the continuity and the momentum equation, there is now a diffusive flux. The diffusion flux represents the diffusion of heat due to molecular thermal conduction - heat transfer due to temperature gradients. Therefore, writing it in the form of Fourier’s law of heat conduction,</p>
<div class="math notranslate nohighlight">
\[\vec{F}_D = -k\nabla T\]</div>
<p>with <span class="math notranslate nohighlight">\(k\)</span> standing for the thermal conductivity coefficient and <span class="math notranslate nohighlight">\(T\)</span> for the absolute static temperature. The final addition to the momentum equation will be the source terms: both volume and surface source terms. Surface source terms  correspond to the time rate of work done by the pressure as well as the shear and normal stresses on the fluid element.  The volume source terms contains the time rate of heat transfer per unit mass - as  <span class="math notranslate nohighlight">\(q_h\)</span>  and the rate of work done by the body forces <span class="math notranslate nohighlight">\(f_e\)</span>. These can be written as the following,</p>
<div class="math notranslate nohighlight">
\[Q_V = \rho\vec{f}_e.\vec{v}+\dot{q}_h\]</div>
<div class="math notranslate nohighlight">
\[\vec{Q}_S=-\rho\vec{v}+{\overline{\tau}}.\vec{v}\]</div>
<p>Gathering all the terms involved we finally obtain,</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t}\int_\Omega \rho E d\Omega + \oint_{\partial\Omega} \rho H (\vec{v}.\vec{n})dS = \oint_{\partial\Omega}k(\nabla T.\vec{n})dS + \int_\Omega (\rho\vec{f_e}.\vec{v}+\dot{q}_h)d\Omega -  \oint_{\partial\Omega}({\overline{\tau}}.\vec{v}).\vec{n}dS\]</div>
<p>where,</p>
<div class="math notranslate nohighlight">
\[H = h+\frac{|\vec{v}|^2}{2} = E + \frac{p}{\rho}\]</div>
</div>
<div class="section" id="complete-navier-stokes-equation">
<h3>Complete Navier-Stokes equation<a class="headerlink" href="#complete-navier-stokes-equation" title="Permalink to this headline">¶</a></h3>
<p>Here, we will gather all the above three conservation equations and write them collectively as a single system of equations. For simplicity reasons, we introduce two flux vectors, namely <span class="math notranslate nohighlight">\(F_c\)</span> and <span class="math notranslate nohighlight">\(F_v\)</span>,. The first one, <span class="math notranslate nohighlight">\(F_c\)</span>, is related to the convective transport of quantities in the fluid, which also includes the pressure terms <span class="math notranslate nohighlight">\(p_n\)</span>. The second flux vector - vector of viscous fluxes <span class="math notranslate nohighlight">\(F_v\)</span>, contains the viscous stresses as well as the heat diffusion. Additionally, let us define a source term <span class="math notranslate nohighlight">\(\vec{Q}\)</span>, which comprises all volume sources due to body forces and volumetric heating. Hence we get the equation</p>
<div class="math notranslate nohighlight">
\[\frac{\partial}{\partial t}\int_\Omega \vec{W}d\Omega + \oint_{\partial\Omega}(\vec{F}_c-\vec{F}_v)dS = \int_\Omega\vec{Q}d\Omega\]</div>
<p>The vector of the so-called conservative variables consists in three dimensions of the following five components</p>
<div class="math notranslate nohighlight">
\[\begin{split}\vec{W} = \begin{bmatrix} \rho\\\rho u\\\rho v\\\rho w\\\rho E \end{bmatrix}\end{split}\]</div>
<p>For the vector of convective fluxes we obtain ,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\vec{F}_c = \begin{bmatrix} \rho V\\\rho uV+n_xp\\\rho vV+n_up\\\rho wV+n_zp\\\rho HV \end{bmatrix}\end{split}\]</div>
<p>with the contravariant velocity <span class="math notranslate nohighlight">\(V\)</span> - the velocity normal to the surface element <span class="math notranslate nohighlight">\(dS\)</span> - being defined as the scalar product of the velocity vector and the unit normal vector, i.e.</p>
<div class="math notranslate nohighlight">
\[V \equiv \vec{v}.\vec{n}=n_xu+n_yv+n_zw\]</div>
<p>The diffusion flux is similarly obtained as</p>
<div class="math notranslate nohighlight">
\[\begin{split}\vec{F_v} = \begin{bmatrix} 0\\n_x\tau _{xx}+n_y\tau_{xy} +n_z\tau_{xz}\\
n_x\tau _{yx}+n_y\tau_{yy} +n_z\tau_{yz}\\
n_x\tau _{zx}+n_y\tau_{zy} +n_z\tau_{zz}\\
n_x\Theta_x+n_y\Theta_y+n_z\Theta_z
\end{bmatrix}\end{split}\]</div>
<p>and,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp;\Theta_x = u\tau_{xx}+v\tau_{xy}+w\tau_{xz}+k\frac{\partial T}{\partial x} \\
&amp; \Theta_y = u\tau_{yx}+v\tau_{yy}+w\tau_{yz}+k\frac{\partial T}{\partial y} \\
&amp; \Theta_z = u\tau_{zx}+v\tau_{zy}+w\tau_{zz}+k\frac{\partial T}{\partial z}
\end{split}\end{split}\]</div>
<p>are the terms describing the work of viscous stresses and the heat conduction in the fluid. Finally, the source term reads</p>
<div class="math notranslate nohighlight">
\[\begin{split}\vec{Q} = \begin{bmatrix} 0\\ \rho f_{e,x} \\ \rho f_{e,y} \\ \rho f_{e,z} \\ \rho\vec{f}_e \cdot\vec{v}+\dot{q}_h \end{bmatrix}\end{split}\]</div>
<p>In the case of a Newtonian fluid, the above system of equations) is called the Navier-Stokes equations. They describe the exchange (flux) of mass, momentum and energy through the boundary <span class="math notranslate nohighlight">\(d\Omega\)</span>  of control volume <span class="math notranslate nohighlight">\(\Omega\)</span> which is fixed in space Thus we have derived the Navier-Stokes equations in integral formulation, in accordance with the conservation laws.</p>
</div>
</div>
<div class="section" id="boundary-treatment-methods">
<h2>Boundary treatment methods<a class="headerlink" href="#boundary-treatment-methods" title="Permalink to this headline">¶</a></h2>
<p>To get a consistent unique solution for a specific problem, it is imperative to define the boundary conditions. However, before delving into that section we must understand how boundaries are treated in order to completely grasp the concept of boundary conditions. Boundary treatments are usually an issue when/if the chosen spatial approximation requires the value of the solution at non-existing points . Typical boundary treatments either</p>
<ul class="simple">
<li><p>Change the approximation method at the edge, i.e; one-sided approximations</p></li>
<li><p>Change the computational domain at the edge, i.e; ghost cells.</p></li>
</ul>
<p>Normally, a numerical scheme involves a certain “stencil” of cells from one or both sides of the cell solved for. But, in finite volume method, when we reach the edge of the computational domain, the scheme for the interior cannot be applied since there are no neighboring cells to solve for the stencil. For example, we cannot use central differencing cannot be applied to cells at the boundary because they do not have any cells preceding them. Thus, for boundary cells, the original numerical scheme applied for the interior cells needs to be changed. The disadvantage of such method is that the solution algorithm needs to be altered around the boundaries, which increases the coding complexity.</p>
<div class="align-center figure" id="id2">
<a class="reference internal image-reference" href="../../_images/bConstraint.png"><img alt="Constraint at boundaries - change of numerical approximation method at boundaries is required" src="../../_images/bConstraint.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Constraint at boundaries - change of numerical approximation method at boundaries is required</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Another alternative is to change the computational domain by introducing so called “ghost cells” outside of the boundary. Usually, 1 or 2 layers of ghost cells are introduced, depending on the size of the stencil. The advantage of the ghost cell method is that the numerical scheme used for the interior can be used unaltered for the boundaries. The idea is to introduce fictitious flow in the ghost cells which will yield the desired boundary conditions on the edge.</p>
<div class="align-center figure" id="id3">
<a class="reference internal image-reference" href="../../_images/GhostCell.png"><img alt="Ghost Cell Approach at Boundaries, which eliminates the need to change numerical approximation method at boundaries alone" src="../../_images/GhostCell.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Ghost Cell Approach at Boundaries, which eliminates the need to change numerical approximation method at boundaries alone</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="types-of-boundaries">
<h2>Types of boundaries<a class="headerlink" href="#types-of-boundaries" title="Permalink to this headline">¶</a></h2>
<p>An appropriate specification of boundary conditions is very important to solve any problem in CFD as it helps model the numerical solution in closeness to real world problems. Boundaries direct motion of flow and specify fluxes their direction in the computational domain, e.g.mass, momentum, energy or any other physical property. Defining boundary conditions involves two main steps:</p>
<ul class="simple">
<li><p>Identifying the location of the boundaries (e.g., inlets, walls, symmetry)</p></li>
<li><p>Supplying information at the boundaries</p></li>
</ul>
<p>In OpenFOAM or any other commercial flow solver, boundaries and internal surfaces are represented by face zones. Boundary data, material and source terms are then assigned to these face zones. It is essential to note that for different variables, different kinds of boundary conditions may be defined for the same boundary.The major classification of boundary conditions in the field of CFD are described below.</p>
<div class="section" id="neumann-and-dirichlet">
<h3>Neumann and Dirichlet<a class="headerlink" href="#neumann-and-dirichlet" title="Permalink to this headline">¶</a></h3>
<p>This is the most fundamental classification of boundary conditions. Neumann and Dirichlet boundary conditions can be distinguished better mathematically rather than descriptively. Dirichlet boundary condition directly specifies the value of a variable at the boundary, e.g. u(x) = constant. While for Neumann boundary condition, the gradient normal to the boundary of a variable at the boundary needs to be specified. There also exists another boundary condition called the mixed boundary condition which is a combination of both Neumann and Dirichlet conditions. This is of the form,</p>
<div class="math notranslate nohighlight">
\[au(x)+b\frac{\partial}{\partial x}nu(x) = constant\]</div>
</div>
<div class="section" id="free-and-solid-surfaces">
<h3>Free and Solid surfaces<a class="headerlink" href="#free-and-solid-surfaces" title="Permalink to this headline">¶</a></h3>
<p>This is the flow, which would occur if the computational domain would be completely “empty,” i.e. free of any solid objects. If a solid object is present in the computational domain, then freestream conditions would occur at infinite distance from the solid object. Free surfaces are either far-field boundaries in external flows or inlet and outlet sections of internal flow systems. These are the boundaries through which the flow enters or leaves the computational domain. In external flow problems, free boundaries are generally located far enough from the body such that free-stream conditions can be considered.  Farfield boundary is a case such that the boundary is at finite distance from the solid object, with values slightly different than the freestream values would be. The numerical simulation of external flows past airfoils, wings, cars and other configurations has to be conducted within a bounded domain. For this reason, artificial farfield boundary conditions have been introduced. The implementation of the farfield boundary conditions for a flow problem has two prerequisites: First, the truncation of the domain should have no notable effects on the flow solution as compared to the infinite domain. Second, any outgoing disturbances must not be reflected back into the flow field. Usually, we do not know the far-field values, but only the freestream ones. But, we need to set some values for the far-field, so we set the freestream values for these. Let us consider the flow conditions shown below. On the left, we have an inflow and on the right, an outflow.</p>
<div class="align-center figure" id="id4">
<a class="reference internal image-reference" href="../../_images/BounFlow.png"><img alt="Farfield boundary:inflow (left); Farfield boundary:outflow (right)" src="../../_images/BounFlow.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Farfield boundary:inflow (left); Farfield boundary:outflow (right)</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>In the above scenario, the position <strong>a</strong> is outside, <strong>b</strong> on the boundary, and position <strong>d</strong> is inside the physical domain. The unit normal vector <span class="math notranslate nohighlight">\(n = [n_z, n_y, n_z]^T\)</span> points out of the domain. Depending on the local Mach number, four different types of farfield boundary conditions have to be treated:</p>
<ul class="simple">
<li><p>Supersonic inflow</p></li>
<li><p>Supersonic outflow</p></li>
<li><p>Subsonic inflow</p></li>
<li><p>Subsonic outflow</p></li>
</ul>
<p>Alternatively, in internal flow systems, these are simply referred to as the inlet and outlet surfaces as
* Subsonic inlet
* Subsonic outlet</p>
<p>In the case of walls, they can be represented as
* Solid walls: Inviscid and viscous flow
* Moving wall</p>
<p>Boundary conditions that account for the symmetries and periodicities are:
* Periodic
* Symmetric plane</p>
</div>
<div class="section" id="supersonic-inflow">
<h3>Supersonic inflow<a class="headerlink" href="#supersonic-inflow" title="Permalink to this headline">¶</a></h3>
<p>For supersonic inflow, the conservative variables on the boundary are determined by freestream values only as</p>
<div class="math notranslate nohighlight">
\[\vec{W_b} = \vec{W_a}\]</div>
<p>This basically translates to,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp;\rho_b = \rho_\infty \\
&amp;p_b = p_\infty \\
&amp;v_b = v_\infty  \\
&amp;w_b = w_\infty \\
\end{split}\end{split}\]</div>
<p>The values <span class="math notranslate nohighlight">\(\vec{W_a}\)</span> are specified based on the given Mach number <span class="math notranslate nohighlight">\(M_\infty\)</span> and on two flow angles.</p>
</div>
<div class="section" id="subsonic-inflow">
<h3>Subsonic inflow<a class="headerlink" href="#subsonic-inflow" title="Permalink to this headline">¶</a></h3>
<p>In subsonic inflow, four characteristic variables are prescribed based on the freestream values. One characteristic variable is extrapolated from the interior of the physical domain. This leads to the following set of boundary conditions:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp;p_b = \frac{1}{2} {p_a+p_d - \rho_0 c_0[(n_x(u_a - u_d) + (n_y(v_a - v_d)+ (n_z(w_a - w_d)]}\\
&amp;\rho_b = \rho_a + \frac{(p_b - p_a)}{c_0^2}\\
&amp;u_b = u_a - \frac{n_x(p_a - p_b)}{\rho_0 c_0}\\
&amp;v_b = v_a - \frac{n_y(p_a - p_b)}{\rho_0 c_0}\\
&amp;w_b = w_a - \frac{n_z(p_a - p_b)}{\rho_0 c_0}
\end{split}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(p_0\)</span> and <span class="math notranslate nohighlight">\(c_0\)</span> represent a reference state. The reference state is normally set equal to the state at the interior point(<em>8d*</em>). The values in point <strong>a</strong> are determined from the freestream state.</p>
</div>
<div class="section" id="subsonic-outflow">
<h3>Subsonic Outflow<a class="headerlink" href="#subsonic-outflow" title="Permalink to this headline">¶</a></h3>
<p>In the case of subsonic outflow, four flow variables (density and the three velocity components) have to be extrapolated from the interior of the physical domain. The remaining fifth variable (pressure) must be specified externally. The primitive variables at the farfield boundary are obtained from</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp; p_b = p_a \\
&amp;\rho_b = \rho_d + \frac{(p_b - p_d)}{c_0 ^ 2} \\
&amp;u_b = u_d - \frac{n_x(p_d- p_b)}{\rho_0 c_0}\\
&amp;v_b = v_d- \frac{n_y(p_d- p_b)}{\rho_0 c_0} \\
&amp;w_b = w_d- \frac{n_z(p_d- p_b)}{\rho_0 c_0}
\end{split}\end{split}\]</div>
<p>with <span class="math notranslate nohighlight">\(p_a\)</span> being the prescribed static pressure. Physical properties in the ghost cells can be obtained by linear extrapolation from the states :math`b` and <span class="math notranslate nohighlight">\(d\)</span>.</p>
</div>
<div class="section" id="subsonic-inlet">
<h3>Subsonic Inlet<a class="headerlink" href="#subsonic-inlet" title="Permalink to this headline">¶</a></h3>
<p>A common procedure consists of the specification of the total pressure, total temperature, and of two flow angles. One characteristic variable has to be interpolated from the interior of the flow domain. One possibility is to employ the outgoing Riemann invariant which is defined for an ideal gas as,</p>
<div class="math notranslate nohighlight">
\[R^- = \vec{v_d} \cdot\vec{n} - \frac{2c_d}{\gamma -1}\]</div>
<p>where the index <strong>d</strong> denotes the state inside the domain. The Riemann invariant is used to determine either the absolute velocity or the the speed of sound at the boundary. In practice, it was found that selecting the speed of sound leads to a more stable scheme, particularly for low Mach-number flows. Therefore, we express the speed at boundary using flow angles, <span class="math notranslate nohighlight">\(\gamma\)</span>  (specific heat ratio) and the total velocity at the interior point <span class="math notranslate nohighlight">\(d\)</span>. Quantities like the static temperature, pressure, density, or the absolute  velocity at the boundary are evaluated as follows</p>
<p>where <span class="math notranslate nohighlight">\(T_0\)</span> and <span class="math notranslate nohighlight">\(p_0\)</span> are the given values of total temperature and pressure, <span class="math notranslate nohighlight">\(R\)</span> and <span class="math notranslate nohighlight">\(C_p\)</span>  represent the specific gas constant and the heat coefficient at constant pressure, respectively. The velocity components at the inlet are obtained by decomposing <span class="math notranslate nohighlight">\(||\vec{v_b||\)</span> according to the two (one in 2D) prescribed flow angles.</p>
</div>
<div class="section" id="subsonic-outlet">
<h3>Subsonic Outlet<a class="headerlink" href="#subsonic-outlet" title="Permalink to this headline">¶</a></h3>
<p>The subsonic outflow condition specifies the static pressure, and extrapolates density and velocity. The subsonic outlet boundary can be treated in a way quite similar to the outflow condition for farfield flows. Only the ambient pressure <span class="math notranslate nohighlight">\(p_a\)</span> is replaced here by the given static exit pressure.</p>
</div>
<div class="section" id="solid-wall-inviscid-flow">
<h3>Solid Wall: Inviscid flow<a class="headerlink" href="#solid-wall-inviscid-flow" title="Permalink to this headline">¶</a></h3>
<p>In the case of an inviscid flow, the fluid slips over the surface.</p>
<div class="align-center figure" id="id5">
<a class="reference internal image-reference" href="../../_images/SolidInviscid.png"><img alt="Solid wall boundary depicting ghost cells, here 0 and 1" src="../../_images/SolidInviscid.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Solid wall boundary depicting ghost cells, here 0 and 1</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>Since there is no friction force, the velocity vector must be tangent to the surface. This is equivalent to the condition that there is no flow normal to the surface, Hence,</p>
<div class="math notranslate nohighlight">
\[\vec{v} \cdot \vec{n} =0\]</div>
<p>where <span class="math notranslate nohighlight">\(\vec{n}\)</span> denotes the unit normal vector at the surface. Hence, the contravariant velocity <span class="math notranslate nohighlight">\(V\)</span> is zero at the wall. Consequently, the vector of convective fluxes reduces to the pressure term alone, i.e,</p>
<p>with <span class="math notranslate nohighlight">\(p_w\)</span> being the wall pressure. Within the cell-centred scheme, the pressure is evaluated at the centroid of the cell. We can obtain the wall pressure most easily by extrapolation from the interior of the domain. As shown in the above figure, we could simply set <span class="math notranslate nohighlight">\(p_w\)</span> = <span class="math notranslate nohighlight">\(p_2\)</span>. Higher accuracy is achieved using either a two-point extrapolation,</p>
<div class="math notranslate nohighlight">
\[p_w = \frac{1}{2}(3p_2 - p_3)\]</div>
<p>or a three point extrapolation,</p>
<div class="math notranslate nohighlight">
\[p_w = \frac{1}{8}(15p_2 - 10p_3 + 10p_3)\]</div>
</div>
<div class="section" id="viscous-flow">
<h3>Viscous Flow<a class="headerlink" href="#viscous-flow" title="Permalink to this headline">¶</a></h3>
<p>For a viscous fluid which passes a solid wall, the relative velocity between the surface and the fluid directly at the surface is assumed to be zero. Therefore, we speak of <strong>noslip</strong> boundary condition. In the case of a stationary wall surface, the Cartesian velocity components become,</p>
<div class="math notranslate nohighlight">
\[u = v = w = 0\]</div>
<p>The implementation of the <strong>noslip</strong> boundary condition, it can be simplified by the utilization of ghost cells. In the case of an adiabatic wall (i.e. no heat flux through the wall), we can set</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp;\rho_1 = \rho_2 \\
&amp;E_1 = E_2 \\
&amp;u_1 = - u_2\\
&amp;v_1 = - v_2\\
&amp;w_1 = w_2
\end{split}\end{split}\]</div>
<p>and likewise for the cells 0 and 3 in the domain.</p>
</div>
<div class="section" id="moving-wall">
<h3>Moving Wall<a class="headerlink" href="#moving-wall" title="Permalink to this headline">¶</a></h3>
<p>For any point of the fluid boundary layer adjacent to a solid wall moving with a certain velocity, we can write the following relations,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp;u= u_{wall,A}\\
&amp;v = v_{wall,A}\\
&amp;w = w_{wall,A}
\end{split}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(wall,A\)</span> stands for wall velocity at the point A on solid wall surface.</p>
</div>
<div class="section" id="periodic-boundaries">
<h3>Periodic Boundaries<a class="headerlink" href="#periodic-boundaries" title="Permalink to this headline">¶</a></h3>
<p>This boundary is established when physical geometry of interest and expected flow pattern and the thermal solution are of a periodically repeating nature. This reduces computational effort in our problems. Consider the figure shown below</p>
<div class="align-center figure" id="id6">
<a class="reference internal image-reference" href="../../_images/Periodic.png"><img alt="Periodic Boundary sketch depicting the repetitive cells" src="../../_images/Periodic.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">Periodic Boundary sketch depicting the repetitive cells</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>The configuration is periodic in the vertical direction. The shaded cells 1 and 2 are located on the lower and the upper periodic boundary, respectively. Due to the periodicity condition, the first ghost-cell layer corresponds to the boundary cells at the opposite periodic boundary. The second ghost-cell layer communicates with the second layer of the physical cells and so on. Hence, all scalar quantities (density, pressure, etc.) in the ghost cells are obtained directly from the corresponding physical cells. Hence, we can write,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp;U_{1'} = U_1 \\
&amp;U_{2'} = U_2
\end{split}\end{split}\]</div>
<p>The same relations hold also for the vector quantities (velocity, gradients) in this case.</p>
</div>
<div class="section" id="symmetric-plane">
<h3>Symmetric Plane<a class="headerlink" href="#symmetric-plane" title="Permalink to this headline">¶</a></h3>
<p>If the flow is to be symmetrical with respect to a line or a plane, the following conditions must be met:</p>
<ul class="simple">
<li><p>No flux across the boundary</p></li>
<li><p>Gradient of a scalar quantity normal to the boundary,</p></li>
<li><p>Gradient of the tangential velocity normal to the boundary,</p></li>
<li><p>Gradient of the normal velocity along the boundary (since <span class="math notranslate nohighlight">\(\vec{v} \cdot \vec{n} = 0\)</span>)</p></li>
</ul>
<p>These can be translated to mathematical expressions as,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{split}
&amp; \vec{v} \cdot \vec{n} =0 \\
&amp; \vec{n} \cdot \vec{\Delta}U = 0\\
&amp; \vec{n} \cdot \vec{\Delta} (\vec{v} \cdot \vec{t}) = 0 \\
&amp; \vec{t} \cdot \vec{\Delta} (\vec{v} \cdot \vec{n}) = 0
\end{split}\end{split}\]</div>
<p>The implementation of the symmetry boundary condition can be largely simplified by employing ghost cells. The flow variables in the ghost cells are obtained using the concept of reflected cells. This means that scalar quantities like density or pressure in the ghost cells are set equal to the values in the opposite interior cells, i.e., <span class="math notranslate nohighlight">\(U_1 = U_2\)</span> and <span class="math notranslate nohighlight">\(U_0 = U_3\)</span>. The velocity components are reflected with respect to the boundary.</p>
</div>
</div>
<div class="section" id="boundary-conditions-in-of">
<h2>Boundary conditions in OF<a class="headerlink" href="#boundary-conditions-in-of" title="Permalink to this headline">¶</a></h2>
<p>In OpenFOAM, for the purpose of applying boundary conditions, a boundary is generally broken up into a set of patches. One patch may include one or more enclosed areas of the boundary surface which do not necessarily need to be physically connected. A type is assigned to every patch as part of the mesh description. Every patch includes a <code class="docutils literal notranslate"><span class="pre">type</span></code> entry that specifies the type of boundary condition and a <code class="docutils literal notranslate"><span class="pre">value</span></code> to specify the value of the variable at the boundary condition. They range from a basic <code class="docutils literal notranslate"><span class="pre">fixedValue</span></code> condition applied to the <code class="docutils literal notranslate"><span class="pre">inlet</span></code>, to a complex <code class="docutils literal notranslate"><span class="pre">waveTransmissive</span></code> condition applied to the <code class="docutils literal notranslate"><span class="pre">outlet</span></code>. The patches with non-generic types, e.g. <code class="docutils literal notranslate"><span class="pre">symmetryPlane</span></code>, defined in boundary, use consistent boundary condition types in the <code class="docutils literal notranslate"><span class="pre">p</span></code> file.
The main geometric types available in OpenFOAM are summarized below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">patch</span></code>: generic type containing no geometric or topological information about the mesh, e.g. used for an inlet or an outlet.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wall</span></code>: for patch that coincides with a solid wall, required for some physical modeling, e.g. wall functions in turbulence modeling.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symmetryPlane</span></code>: for a planar patch which is a symmetry plane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symmetry</span></code>: for any (non-planar) patch which uses the symmetry plane (slip) condition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">empty</span></code>: for solutions in in 2 (or 1) dimensions (2D/1D), the type used on each patch whose plane is normal to the 3rd (and 2nd) dimension for which no solution is required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wedge</span></code>: for 2 dimensional axis-symmetric cases, e.g.  a cylinder, the geometry is specified as a wedge of small angle  and 1 cell thick, running along the centre line, straddling one of the coordinate planes, the axis-symmetric wedge planes must be specified as separate patches of <code class="docutils literal notranslate"><span class="pre">wedge</span></code> type.</p></li>
</ul>
<p>Boundary conditions in OpenFOAM are divided into two groups by - basic and derived. The main basic boundary condition types available in OpenFOAM are summarised below using a patch field named <span class="math notranslate nohighlight">\(Q\)</span></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fixedValue</span></code>: value of <span class="math notranslate nohighlight">\(Q\)</span> is specified by value(Dirichlet).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fixedGradient</span></code>: normal gradient of <span class="math notranslate nohighlight">\(Q\)</span>, that is <span class="math notranslate nohighlight">\(\frac{\partial Q}{\partial n}\)</span> is specified by gradient(Neumann).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zeroGradient</span></code>: normal gradient of <span class="math notranslate nohighlight">\(Q\)</span> is zero.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calculated</span></code>: patch field <span class="math notranslate nohighlight">\(Q\)</span> calculated from other patch fields.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mixed</span></code>: mixed <code class="docutils literal notranslate"><span class="pre">fixedValue</span></code> / <code class="docutils literal notranslate"><span class="pre">fixedGradient</span></code> condition depending on <code class="docutils literal notranslate"><span class="pre">valueFraction</span></code> <span class="math notranslate nohighlight">\((0 \leq valueFraction \leq 1)\)</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">directionMixed</span></code>: mixed condition with tensorial valueFraction, to allow different conditions in normal and tangential directions of a vector patch field, e.g.  fixedValue in the tangential direction, zeroGradient in the normal direction.</p></li>
</ul>
<p>There are numerous more complex boundary conditions derived from the basic conditions. For example, many complex conditions are derived from <code class="docutils literal notranslate"><span class="pre">fixedValue</span></code>, where the value is calculated by a function of other patch fields, time, geometric information, etc. Some other conditions derived from <code class="docutils literal notranslate"><span class="pre">mixed</span></code> / <code class="docutils literal notranslate"><span class="pre">directionMixed</span></code> switch between <code class="docutils literal notranslate"><span class="pre">fixedValue</span></code> and <code class="docutils literal notranslate"><span class="pre">fixedGradient</span></code>. These are not discussed currently here but will be later addressed in the advanced modules.</p>
<p>In OpenFOAM, almost all definitions of boundary conditions are stored in the following directory: <code class="docutils literal notranslate"><span class="pre">src/finiteVolume/fields/fvPatchFields``with</span> <span class="pre">the</span> <span class="pre">main</span> <span class="pre">implemented</span> <span class="pre">``types</span></code> of boundary conditions stored in the subdirectories listed below:</p>
<ul class="simple">
<li><p>basic</p></li>
<li><p>constraint</p></li>
<li><p>derived</p></li>
<li><p>fvPatchField</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">fvPatchField</span></code> directory contains the general class definition of a boundary condition, which represents the base class. This class defines the main functions and data structures that will be used and will be inherited by the genuine classes. The basic directory contains the basic mathematically defined boundary conditions including the Dirichlet type (  <code class="docutils literal notranslate"><span class="pre">fixedValue`</span></code>), the Neuman type ( <code class="docutils literal notranslate"><span class="pre">zeroGradient</span></code>/<code class="docutils literal notranslate"><span class="pre">fixedGradient</span></code>) and the Robin type ( <code class="docutils literal notranslate"><span class="pre">mixed</span></code>) boundary conditions. An additional entry included in  <code class="docutils literal notranslate"><span class="pre">basic</span></code> directory is the  <code class="docutils literal notranslate"><span class="pre">coupled</span></code> boundary condition that implements a patch to patch type condition, i.e., coupling two boundary patches together (coupled boundaries). The  <code class="docutils literal notranslate"><span class="pre">constraint</span></code> directory contains geometric type boundary conditions that derive from the  <code class="docutils literal notranslate"><span class="pre">coupled</span></code> boundary class. An example is the periodicity boundary condition. Finally the derived directory includes all boundary conditions that are derived from the basic boundary conditions. These derived boundary conditions are simply specializations of the basic types.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, SimCenter

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>